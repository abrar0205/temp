# MLflow with Keycloak OIDC Authentication - Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# SECURITY - REQUIRED: Generate and update these values!
# =============================================================================

# Session encryption key (32+ random characters)
# Generate with: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_ME_GENERATE_A_SECURE_KEY

# OIDC Client Secret (obtained from Keycloak after running configure-keycloak.sh)
OIDC_CLIENT_SECRET=

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD
MLFLOW_DB=mlflow
KEYCLOAK_DB=keycloak

# =============================================================================
# Keycloak Configuration
# =============================================================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_SECURE_PASSWORD
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8080
KEYCLOAK_REALM=mlflow
KC_LOG_LEVEL=info

# =============================================================================
# Redis Configuration (Session Storage)
# =============================================================================
REDIS_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# =============================================================================
# MinIO Configuration (Artifact Storage)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=CHANGE_ME_SECURE_PASSWORD
MLFLOW_BUCKET=mlflow

# =============================================================================
# MLflow Configuration
# =============================================================================
MLFLOW_PORT=5000
MLFLOW_IMAGE=ghcr.io/mlflow-oidc/mlflow-oidc-server:latest
LOG_LEVEL=INFO

# =============================================================================
# OIDC Configuration
# =============================================================================
OIDC_PROVIDER_DISPLAY_NAME=Keycloak
OIDC_CLIENT_ID=mlflow
OIDC_REDIRECT_URI=http://localhost:5000/callback
OIDC_SCOPE=openid profile email

# User groups (must match Keycloak group names)
OIDC_ADMIN_GROUP_NAME=mlflow_admins
OIDC_GROUP_NAME=mlflow_users

# =============================================================================
# Test User Configuration (used by configure-keycloak.sh)
# =============================================================================
TEST_USERNAME=mlflow_user
TEST_PASSWORD=password123
TEST_EMAIL=mlflow_user@example.com
TEST_FIRSTNAME=MLflow
TEST_LASTNAME=User
