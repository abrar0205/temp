# MLflow OIDC Environment Configuration
# Copy this file to .env and update the values
# DO NOT COMMIT .env file to version control

# =============================================================================
# SECURITY: Generate a new secret key for production
# Run: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# =============================================================================
SECRET_KEY=change-this-to-a-secure-random-string-at-least-32-chars

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
POSTGRES_USER=mlflow
POSTGRES_PASSWORD=mlflow_password_change_me
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=mlflow

# Keycloak PostgreSQL Database
KEYCLOAK_POSTGRES_DB=keycloak
KEYCLOAK_POSTGRES_USER=keycloak
KEYCLOAK_POSTGRES_PASSWORD=keycloak_password_change_me

# =============================================================================
# MLflow Configuration
# =============================================================================
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow:mlflow_password_change_me@postgres:5432/mlflow

# Artifact storage (MinIO/S3)
MLFLOW_ARTIFACTS_DESTINATION=s3://mlflow-artifacts
MLFLOW_S3_ENDPOINT_URL=http://minio:9000

# =============================================================================
# MinIO Configuration (S3-compatible artifact storage)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin_password_change_me
MINIO_BUCKET_NAME=mlflow-artifacts

# AWS credentials for MLflow to access MinIO
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin_password_change_me

# =============================================================================
# Redis Configuration (Session storage)
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_change_me

# =============================================================================
# Keycloak Configuration
# =============================================================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin_password_change_me
KEYCLOAK_HOST=keycloak
KEYCLOAK_PORT=8080
KEYCLOAK_REALM=mlflow

# =============================================================================
# OIDC Configuration (MLflow <-> Keycloak)
# =============================================================================
# Provider URL (Keycloak realm)
OIDC_PROVIDER_URL=http://keycloak:8080/realms/mlflow

# Client credentials (will be set by configure-keycloak.sh)
OIDC_CLIENT_ID=mlflow-client
OIDC_CLIENT_SECRET=change-this-after-running-configure-keycloak

# Redirect URI (must match what's configured in Keycloak)
OIDC_REDIRECT_URI=http://localhost:5000/callback

# Scopes (note: singular OIDC_SCOPE, not OIDC_SCOPES)
OIDC_SCOPE=openid profile email

# Group names for authorization
OIDC_ADMIN_GROUP_NAME=mlflow_admins
OIDC_GROUP_NAME=mlflow_users

# =============================================================================
# Application URLs (for external access)
# =============================================================================
MLFLOW_EXTERNAL_URL=http://localhost:5000
KEYCLOAK_EXTERNAL_URL=http://localhost:8080
MINIO_CONSOLE_URL=http://localhost:9001
